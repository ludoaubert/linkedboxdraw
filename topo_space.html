<html>
<head>
<link rel="stylesheet" href="topo_space.css">
<script type="module" src="topo_space.js"></script>
</head>
<body onload="main()">

<div class="grid-container">

<div id="main_svg">

</div>

<div id="dt_div">
<table id="decision_tree">
  <thead>
    <tr>
      <th>i</th>
      <th>parent_index</th>
      <th>depth</th>
      <th>i_emplacement_source</th>
      <th>i_emplacement_destination</th>
      <th>match</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>-1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>69</td>
    </tr>
    <tr>
      <td>0</td>
      <td>-1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>69</td>
    </tr>
  </tbody>
</table>

<table id="chemin">
  <thead>
    <tr>
      <th>i</th>
      <th>parent_index</th>
      <th>depth</th>
      <th>i_emplacement_source</th>
      <th>i_emplacement_destination</th>
      <th>match</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>-1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>69</td>
    </tr>
    <tr>
      <td>0</td>
      <td>-1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>69</td>
    </tr>
  </tbody>
</table>
</div>

</div>

  <script type="module">
import {print_chemin} from 'topo_space';

var selected = null;

let dt = document.querySelector('#decision_tree');

dt.addEventListener('mouseover', (event)=>{
// 'highlight' color is set in tablelist.css
       let tr = event.target.parentNode;
       if ( tr.className === '') {
            tr.className='highlight';
       }
       return false
});

dt.addEventListener('mouseout', (event)=>{
       let tr = event.target.parentNode;
       if ( tr.className === 'highlight') {
            tr.className='';
       }
       return false
});

dt.addEventListener('mousedown', (event)=>{

       let tr = event.target.parentNode;

     if ( tr.className !== 'clicked' ) {
// Clear previous selection
            if ( selected !== null ) {
                 selected.className='';
            }
// Mark this row as selected
            tr.className='clicked';
            selected = tr;
	   const i = parseInt(tr.cells[0],10);
	let cm = document.getElementById("chemin").getElementsByTagName("tbody")[0];
	cm.innerHTML = print_chemin(i);

     }
     else {
           tr.className='';
           selected = null;
     }
     return true
});
  </script>

</body>
</html>
